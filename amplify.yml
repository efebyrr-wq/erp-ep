version: 1

# Amplify hosting build for the "frontend" app (staging branch).
# Ensures VITE_API_BASE_URL is set to CloudFront so production builds never fall back to HTTP.
env:
  variables:
    VITE_API_BASE_URL: https://d31tialuhzl449.cloudfront.net

frontend:
  phases:
    preBuild:
      commands:
        - cd frontend
        - npm ci
    build:
      commands:
        - cd frontend
        - npm run build
  artifacts:
    baseDirectory: frontend/dist
    files:
      - '**/*'
  cache:
    paths:
      - frontend/node_modules/**/* 


